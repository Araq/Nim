kind: pipeline
name: nim-on-arm64
type: docker

platform:
  arch: arm64
  os: linux

steps:
  - name: runci
    image: gcc
    commands:
      - |
        sudo apt-get install --no-install-recommends -yq valgrind libc6-dbg \
          libgc-dev libsdl1.2-dev libsfml-dev
      - git clone --depth 1 https://github.com/nim-lang/csources.git
      - export PATH=$PWD/bin:$PATH
      - make -C csources -j$(nproc)
      - nim c koch
      - "./koch runCI"

---
kind: pipeline
name: nim-on-arm
type: docker

platform:
  arch: arm
  os: linux

steps:
  - name: runci
    image: gcc
    commands:
      - |
        sudo apt-get install --no-install-recommends -yq valgrind libc6-dbg \
          libgc-dev libsdl1.2-dev libsfml-dev
      - git clone --depth 1 https://github.com/nim-lang/csources.git
      - export PATH=$PWD/bin:$PATH
      - make -C csources -j$(nproc)
      - nim c koch
      - "./koch runCI"
