---
kind: pipeline
type: docker
name: nim-on-arm64

platform:
  os: linux
  arch: arm64

clone:
  depth: 1

steps:
- name: runci
  image: ghcr.io/alaviss/nim-ci:sha-8eb1e7b@sha256:aad1d7b6c95cde34b2a90efe7f8f2a271513ed788ed2d4256cb60906e1ac54f0
  commands:
  - git clone --depth 1 https://github.com/nim-lang/csources.git
  - export PATH=$PWD/bin:$PATH
  - make -C csources -j$(nproc)
  - nim c koch
  - "if ! ./koch runCI; then\n  nim c -r tools/ci_testresults\n  exit 1\nfi\n"

---
kind: pipeline
type: docker
name: nim-on-arm

platform:
  os: linux
  arch: arm

clone:
  depth: 1

steps:
- name: runci
  image: ghcr.io/alaviss/nim-ci:sha-8eb1e7b@sha256:1da6b7101fcbae025c09cc1fb51f84a3737d18ed4dc67c0d58ea0bb17e89d280
  commands:
  - git clone --depth 1 https://github.com/nim-lang/csources.git
  - export PATH=$PWD/bin:$PATH
  - make -C csources -j$(nproc) ucpu=arm
  - nim c koch
  - "if ! ./koch runCI; then\n  nim c -r tools/ci_testresults\n  exit 1\nfi\n"

...
